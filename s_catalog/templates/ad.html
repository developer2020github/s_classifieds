<!doctype html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css"  href="{{ url_for('static', filename='css/bootstrap.min.css') }}" >
  <link rel="stylesheet" type="text/css"  href="{{ url_for('static', filename='css/style.css') }}" >
</head>

<body>
    <div class="container-fluid">
        <div class="row top-buffer-sm ">
            <div class="col-md-3 panel panel-default panel-main">
                S-classifieds
            </div>
            <div class="col-md-3  form-inline">
                <select id = "main-city-select" class="form-control">
                    <option selected disabled>Location: all</option>
                	{% for city in cities %}
                		<option value="{{ city }}">{{ city }}</option>
                	{% endfor %}
                </select>
            </div>
            <div class="col-md-3">
            </div>
            <div class="col-md-3">
                <div class="btn-group" role="group" aria-label="...">
                    <a href="signin" class="btn btn-default">Sign in</a>
                    <a href="myads" class="btn btn-default">My ads</a>
                    <button type="button" class="btn btn-default">New ad</button>
                </div>
            </div>
        </div>
        <div class="row categories-bar top-buffer">
            <div class="col-md-3">
            </div>
            <div class="col-md-9 form-inline">
                {% for category in categories.keys() %}
                <select class="form-control">
                    <option selected disabled>{{ category }}</option>
                    {% for item in categories[category] %}
                    	<option>{{ item }}</option>
                    {% endfor %}
                </select>
                {% endfor %}
            </div>
        </div>
        <div class="row top-buffer">
            <div class="col-md-3">
                <div class="panel panel-default search-panel">
                    <div class="panel panel-default">
                        <div class="panel-heading">SEARCH</div>
                    </div>
                    <select id = "search-city-select" class="form-control">
                    <option selected disabled>Location: all</option>
                	{% for city in cities %}
                		<option value="{{ city }}">{{ city }}</option>
                	{% endfor %}
                </select>
                    <select id="category-selected" class="form-control" onchange="populate_sub_categories_in_search_bar()">
                        <option selected disabled>Select category</option>
                        {% for category in categories.keys() %}
                        	<option value="{{ category }}">{{ category }}</option>
                        {% endfor %}
                    </select>
                    <select id="sub-category-selected" class="form-control">
                        <option selected disabled>Sub-Category: select category first</option>
                    </select>
                    <select class="form-control">
                        <option selected disabled>Ads posted: any time</option>
                        <option>Within 3 days</option>
                        <option>Within 1 week</option>
                        <option>Within 2 weeks</option>
                        <option>Within 3 weeks</option>
                        <option>Within 1 months</option>
                        <option>Within 3 months</option>
                        <option>Within 6 months</option>
                    </select>
                    <button class="btn btn-block">SEARCH</button>
                </div>
            </div>
            <div class="col-md-9">
	            <div class = "latest-ads panel panel-default panel-main">
	                <h4>Selected ad {{ selected_ad["city"] }} >  {{ selected_ad["category"] }} >  {{ selected_ad["sub_category"] }} > {{ selected_ad["ad_title"] }} Price : {{ selected_ad["price"] }}</h4>
	            </div>
	             <div class = "latest-ads panel panel-default panel-main panel-text">
	                {{ selected_ad["text"] }}
	            </div>
	             <div class = "latest-ads panel panel-default panel-main panel-text">
	                {{ selected_ad["date"] }} - date

	                {{ selected_ad["contact_phone"] }} - phone
	                {{ selected_ad["contact_email"] }} - email
	                {{ selected_ad["contact_name"] }} -  contact name
	            </div>
			               <div class="row">
			               <div class = "latest-ads panel panel-default panel-main panel-text">
		      				<div class="col-md-3 latest-ads panel panel-default panel-main panel-text">
		        				{{ selected_ad["date"] }} - date
		      				</div>
		      				<div class="col-md-3 latest-ads panel panel-default panel-main panel-text">
		        				{{ selected_ad["contact_phone"] }} - phone
		      				</div>
		      					<div class="col-md-3 latest-ads panel panel-default panel-main panel-text">
		        				{{ selected_ad["contact_email"] }} - email
		      				</div>
		      				<div class="col-md-3 latest-ads panel panel-default panel-main panel-text">
		        				{{ selected_ad["contact_name"] }} - name
		      				</div>
		      				</div>
		    				</div>
              </div>
        </div>
    </div>
    <script type="text/javascript" src="{{ url_for('static', filename='js/jquery.min.js') }}"></script>
    <script language="JavaScript">
    function populate_sub_categories_in_search_bar() {
        //populate sub-categories in search bar according to category selected by user 
        //called on change in category
        var selected_category = $("#category-selected").val();
        var all_categories = {{ categories_json | safe }};
        var selected_sub_category_id = $("#sub-category-selected");

        var list_of_selected_sub_categories = all_categories[selected_category];

        //reset menu if there was some category selected before and show user that 
        //they can now select a sub-category
        selected_sub_category_id.find("option").remove().end();
        selected_sub_category_id.append($("<option selected disabled/>").val("Select Sub - Category").text("Select Sub - Category"));
        $.each(list_of_selected_sub_categories, function(index, value) {
            selected_sub_category_id.append($("<option />").val(value).text(value));
        });
    }
    </script>
</body>

</html>
